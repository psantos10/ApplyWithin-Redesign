<div class="container" style="margin-top:-10px">

  <div class="row">
    <%= render 'positions/search'%>
    <%= render 'positions/map' %>
  </div>

  <div class="row">
    <div id="positions">
      <%= render 'positions/results' %>
    </div>
  </div>
</div>

<script type="text/javascript">
    document.getElementById("map_btn").addEventListener("click", google_map);
    function google_map() {
      var handler = Gmaps.build('Google', { markers: { clusterer: { maxZoom: 10, gridSize: 100 }}});
      handler.buildMap({ 
    	provider: { mapTypeId: google.maps.MapTypeId.ROADMAP, maxZoom: 18 }, 
    	internal: {id: 'multi_markers'}}, function(){
      var markers = handler.addMarkers(<%=raw @hash.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
      });
    }
</script>

